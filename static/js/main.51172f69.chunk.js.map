{"version":3,"sources":["redux/dialog-reducer.ts","api/api.ts","components/Music/Music.module.css","components/News/News.module.css","components/Settings/Settings.module.css","components/Users/User.module.css","components/Users/Users.module.css","components/Login/Login.module.css","components/Navbar/Navbar.module.css","reportWebVitals.ts","redux/users-reducer.ts","redux/auth-reducer.ts","redux/app-reducer.ts","redux/redux-store.ts","components/Navbar/Navbar.tsx","components/Music/Music.tsx","components/News/News.tsx","components/Settings/Settings.tsx","components/common/Paginator/Paginator.tsx","components/Users/User.tsx","assets/images/users2.png","components/Users/Users.tsx","redux/users-selector.ts","components/Users/UsersContainer.tsx","components/Header/Header.tsx","components/Header/HeaderContainer.tsx","components/Login/Login.tsx","hoc/withSuspence.tsx","App.tsx","index.tsx","assets/images/preloader.gif","components/common/Preloader/Preloader.tsx","components/common/Paginator/Paginator.module.css","components/common/FormsControls/FormsControls.tsx","utils/validators/validators.ts","components/Header/Header.module.css","components/common/FormsControls/FormsControls.module.css","redux/profile-reducer.ts","hoc/withAuthRedirect.tsx"],"names":["SEND_MESSAGE","initialState","dialogs","name","id","messages","message","sendMessageCreator","newMessageBody","type","dialogsReducer","state","action","body","ResultCodeEnum","ResultCodeForCaptcha","instanse","axios","create","withCredentials","baseURL","headers","usersAPI","getUsers","currentPage","pageSize","get","then","res","data","followed","post","response","unfollowed","delete","getProfile","userId","console","warn","profileAPI","getStatus","updateStatus","status","put","savePhoto","photoFile","formData","FormData","append","saveProfile","profile","authAPI","me","login","email","password","rememberMe","captcha","logout","securityAPI","getCaptcha","module","exports","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","FOLLOW","UNFOLLOW","SET_USERS","SET_CURRENT_PAGE","SET_TOTAL_USERS_COUNT","TOGGLE_IS_FETCHING","TOGGLE_IS_FOLLOWING_PROGRESS","users","totalUsersCount","isFetching","followingInProgress","followSuccess","unfollowSuccess","setCurrentPage","toggleIsFetching","toggleFollowingProgress","followUnfollowFlow","dispatch","apiMethod","actionCreator","a","resultCode","usersReducer","map","u","count","filter","isAuth","captchaUrl","setAuthUserData","payload","getCaptchaUrlSuccess","getAuthUserData","meData","Success","authReducer","INITIALIZED_SUCCESS","initialized","appReducer","rootReduser","combineReducers","profilePage","profileReducer","dialogsPage","usersPage","auth","form","formReducer","app","store","createStore","applyMiddleware","thunkMiddleware","window","Navbar","className","s","nav","item","to","activeClassName","activeLink","Music","style","music","href","target","News","news","Settings","settings","background","color","Paginator","totalItemsCount","onPageChanged","portionSize","pagesCount","Math","ceil","pages","i","push","portionCount","useState","portionNumber","setPortionNumber","leftPortionPageNUmber","rightPortionPageNUmber","styles","paginator","prevButton","onClick","p","pageNumber","selectedPage","nextButton","User","follow","unfollow","alt","src","photos","small","photo","marginLeft","disabled","some","paddingLeft","Users","props","usersContainer","getUser","createSelector","getPageSize","getTotalUsersCount","getCurrentPage","getIsFetching","getFollowingInProgress","UsersContainer","this","Preloader","React","Component","compose","connect","bind","page","items","totalCount","withAuthRedirect","Header","header","loginBlock","display","fontSize","HeaderContainer","LoginReduxForm","reduxForm","onSubmit","handleSubmit","Field","component","Input","validate","required","placeholder","error","loginData","CaptchaIsRequired","url","length","stopSubmit","_error","loginContainer","withSuspense","fallback","DialogsContainer","lazy","ProfileContainer","App","initializeApp","path","render","ReactDOM","document","getElementById","width","height","preloader","FormControl","input","meta","child","hasError","touched","formControl","children","Textarea","restProps","value","maxLengthCreator","maxLength","ADD_POST","SET_USER_PROFILE","SET_STATUS","DELETE_POST","SAVE_PHOTO_SUCCESS","posts","likesCount","addPostActionCreator","newPostBody","setStatus","getUserProfile","profileData","file","newPost","mapStateToPropsForRedirect","RedirectComponent"],"mappings":"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","file":"static/js/main.51172f69.chunk.js","sourcesContent":["export type ActionTypes = SendMessageActionType\r\n\r\ntype SendMessageActionType = {\r\n    type: 'SEND_MESSAGE'\r\n    newMessageBody: string\r\n}\r\nexport type DialogsPageType = {\r\n    dialogs: Array<DialogsType>\r\n    messages: Array<MessageType>\r\n}\r\nexport type DialogsType = {\r\n    name: string\r\n    id: number\r\n}\r\nexport type MessageType = {\r\n    id: number\r\n    message: string\r\n}\r\n\r\nconst SEND_MESSAGE = \"SEND_MESSAGE\"\r\n\r\nlet initialState: DialogsPageType = {\r\n    dialogs: [\r\n        {name: 'Dimka', id: 1},\r\n        {name: 'Kirik', id: 2},\r\n        {name: 'Sveta', id: 3},\r\n        {name: 'Sasha', id: 4},\r\n        {name: 'Victor', id: 5},\r\n        {name: 'Valera', id: 6}\r\n    ],\r\n    messages: [\r\n        {id: 1, message: 'Hey Ya'},\r\n        {id: 2, message: 'how are you'},\r\n        {id: 3, message: 'Hi'},\r\n        {id: 4, message: 'Hello man'},\r\n        {id: 5, message: 'Cull'}\r\n    ]\r\n}\r\n\r\nconst dialogsReducer = (state: DialogsPageType = initialState, action: ActionTypes) => {\r\n    switch (action.type) {\r\n\r\n        case SEND_MESSAGE:\r\n            let body = action.newMessageBody\r\n            return {\r\n                ...state,\r\n                messages: [...state.messages, {id: 7, message: body}]\r\n            }\r\n\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const sendMessageCreator = (newMessageBody: string): SendMessageActionType => ({\r\n    type: SEND_MESSAGE,\r\n    newMessageBody\r\n})\r\n\r\n\r\nexport default dialogsReducer","import axios from \"axios\";\r\nimport {ProfileType} from \"../redux/profile-reducer\";\r\n\r\nconst instanse = axios.create({\r\n    withCredentials: true,\r\n    baseURL: 'https://social-network.samuraijs.com/api/1.0',\r\n    headers: {\r\n        \"API-KEY\": \"9796e0df-7156-4180-913f-3e6c30a4c76a\"\r\n    }\r\n})\r\n\r\ntype UserType = {\r\n    id: number\r\n    name: string\r\n    status: string\r\n    photos: {\r\n        small: string\r\n        large: string\r\n    }\r\n    followed: boolean\r\n}\r\n\r\n\r\n\r\ntype GetUsersResponseType = {\r\n    items: Array<UserType>\r\n    totalCount: number\r\n    error: string\r\n}\r\n\r\ntype FollowedResponseType = {\r\n    resultCode: ResultCodeEnum\r\n    messages: string\r\n    data: {\r\n\r\n    }\r\n}\r\nexport const usersAPI = {\r\n    getUsers (currentPage: number = 1, pageSize: number = 5){\r\n        return instanse.get<GetUsersResponseType>(\r\n            `/users?page=${currentPage}&count=${pageSize}`\r\n        ).then(res => res.data)\r\n    },\r\n    followed(id: number){\r\n        return instanse.post<FollowedResponseType>(\r\n            `/follow/${id}`, {}\r\n        ).then(response => {\r\n            return response.data\r\n        })\r\n    },\r\n    unfollowed(id: number){\r\n        return instanse.delete<FollowedResponseType>(\r\n            `/follow/${id}`).then(response => {\r\n            return response.data\r\n        })\r\n    },\r\n    getProfile(userId: number){\r\n        console.warn('Obsolete method. Please profileApi object')\r\n       return profileAPI.getProfile(userId)\r\n    }\r\n}\r\n\r\ntype GetProfileResponseType = ProfileType\r\n\r\nexport const profileAPI = {\r\n    getProfile(userId: number){\r\n        return instanse.get<GetProfileResponseType>(`/profile/` + userId).then(res => res.data)\r\n    },\r\n    getStatus(userId: number) {\r\n        return instanse.get(`/profile/status/` + userId )\r\n    },\r\n    updateStatus(status: string) {\r\n        return instanse.put<FollowedResponseType>(`/profile/status`,{status: status})\r\n    },\r\n    savePhoto(photoFile: any) {\r\n        const formData = new FormData()\r\n        formData.append('image', photoFile)\r\n        return instanse.put(`/profile/photo`, formData,{\r\n            headers: {\r\n                'Content- Type' : 'multipart/form-data'\r\n            }\r\n        })\r\n    },\r\n    saveProfile(profile: ProfileType) {\r\n        return instanse.put('/profile', profile)\r\n    }\r\n}\r\n\r\nexport enum ResultCodeEnum {\r\n    Success,\r\n    Error,\r\n}\r\nexport enum ResultCodeForCaptcha {\r\n    CaptchaIsRequired= 10\r\n}\r\n\r\ntype MeResponseType = {\r\n    data: {\r\n        id: number\r\n        email: string\r\n        login: string\r\n    }\r\n    resultCode: ResultCodeEnum\r\n    messages: Array<string>\r\n}\r\n\r\ntype LoginResponseType = {\r\n    resultCode: ResultCodeEnum | ResultCodeForCaptcha\r\n    messages: Array<string>\r\n    data: {\r\n        userId: number\r\n    }\r\n}\r\n\r\ntype LogoutResponseType = {\r\n    resultCode: ResultCodeEnum\r\n    messages: Array<string>\r\n    data: {}\r\n}\r\n\r\nexport const authAPI = {\r\n    me(){\r\n        return instanse.get<MeResponseType>(`/auth/me`).then(res => res.data)\r\n    },\r\n   login(email: string,password: string,rememberMe: boolean = false, captcha: null | string = null) {\r\n        return instanse.post<LoginResponseType>(`/auth/login`, {email, password, rememberMe, captcha})\r\n            .then(res=>res.data)\r\n   },\r\n   logout() {\r\n    return instanse.delete<LogoutResponseType>(`/auth/login`).then(res => res.data)\r\n    }\r\n}\r\n\r\ntype GetCaptchaResponseType = {\r\n    url: string\r\n}\r\n\r\nexport const securityAPI = {\r\n    getCaptcha() {\r\n        return instanse.get<GetCaptchaResponseType>(`/security/get-captcha-url`).then(res=> res.data)\r\n    }\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"music\":\"Music_music__vEf1b\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"news\":\"News_news__321Xf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"settings\":\"Settings_settings__3Ayw9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"photo\":\"User_photo__1bkNW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"usersContainer\":\"Users_usersContainer__t7L2Y\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loginContainer\":\"Login_loginContainer__1xfu_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Navbar_nav__vt2I8\",\"item\":\"Navbar_item__3hdpX\",\"activeLink\":\"Navbar_activeLink__2iY89\"};","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import {usersAPI} from \"../api/api\";\r\nimport {ThunkAction} from \"redux-thunk\";\r\nimport {RootReduxState} from \"./redux-store\";\r\nimport {Dispatch} from \"redux\";\r\n\r\n\r\nexport type ActionType =\r\n    FollowActionType\r\n    | UnfollowActionType\r\n    | SetUsersActionType\r\n    | SetCurrentPageActionType\r\n    | SetTotalUsersCountActionType\r\n    | ToggleIsFetchingActionType\r\n    | ToggleFollowingProgressActionType\r\n\r\ntype FollowActionType = {\r\n    type: 'FOLLOW'\r\n    userId: number\r\n}\r\ntype UnfollowActionType = {\r\n    type: 'UNFOLLOW'\r\n    userId: number\r\n}\r\ntype SetUsersActionType = {\r\n    type: 'SET_USERS'\r\n    users: Array<UsersType>\r\n}\r\n\r\ntype SetCurrentPageActionType = {\r\n    type: 'SET_CURRENT_PAGE'\r\n    currentPage: number\r\n}\r\ntype SetTotalUsersCountActionType = {\r\n    type: 'SET_TOTAL_USERS_COUNT'\r\n    count: number\r\n}\r\ntype ToggleIsFetchingActionType = {\r\n    type: 'TOGGLE_IS_FETCHING'\r\n    isFetching: boolean\r\n}\r\ntype ToggleFollowingProgressActionType = {\r\n    type: 'TOGGLE_IS_FOLLOWING_PROGRESS'\r\n    isFetching: boolean\r\n    userId: number\r\n}\r\n\r\n\r\nexport type UsersType = {\r\n    id: number\r\n    followed: boolean\r\n    name: string\r\n    photos: {\r\n        small: string\r\n        large: string\r\n    }\r\n    status: string\r\n}\r\n\r\nexport type InitialStateType = {\r\n    users: Array<UsersType>\r\n    pageSize: number\r\n    totalUsersCount: number\r\n    currentPage: number\r\n    isFetching: boolean\r\n    followingInProgress: number[]\r\n}\r\n\r\nconst FOLLOW = \"FOLLOW\"\r\nconst UNFOLLOW = \"UNFOLLOW\"\r\nconst SET_USERS = 'SET_USERS'\r\nconst SET_CURRENT_PAGE = 'SET_CURRENT_PAGE'\r\nconst SET_TOTAL_USERS_COUNT = 'SET_TOTAL_USERS_COUNT'\r\nconst TOGGLE_IS_FETCHING = 'TOGGLE_IS_FETCHING'\r\nconst TOGGLE_IS_FOLLOWING_PROGRESS = 'TOGGLE_IS_FOLLOWING_PROGRESS'\r\n\r\n\r\nlet initialState: InitialStateType = {\r\n    users: [],\r\n    pageSize: 10,\r\n    totalUsersCount: 0,\r\n    currentPage: 1,\r\n    isFetching: true,\r\n    followingInProgress: []\r\n}\r\n\r\nconst usersReducer = (state = initialState, action: ActionType): InitialStateType => {\r\n    switch (action.type) {\r\n        case FOLLOW:\r\n            return {\r\n                ...state, users: state.users.map(u => {\r\n                    if (u.id === action.userId) {\r\n                        return {...u, followed: true}\r\n                    }\r\n                    return u\r\n                })\r\n            }\r\n        case UNFOLLOW:\r\n            return {\r\n                ...state, users: state.users.map(u => {\r\n                    if (u.id === action.userId) {\r\n                        return {...u, followed: false}\r\n                    }\r\n                    return u\r\n                })\r\n            }\r\n        case SET_USERS:\r\n            return {...state, users: action.users}\r\n        case SET_CURRENT_PAGE:\r\n            return {\r\n                ...state, currentPage: action.currentPage\r\n            }\r\n        case SET_TOTAL_USERS_COUNT:\r\n            return {\r\n                ...state, totalUsersCount: action.count\r\n            }\r\n        case TOGGLE_IS_FETCHING:\r\n            return {\r\n                ...state, isFetching: action.isFetching\r\n            }\r\n        case TOGGLE_IS_FOLLOWING_PROGRESS:\r\n            return (\r\n                {\r\n                    ...state, followingInProgress: action.isFetching\r\n                        ? [...state.followingInProgress, action.userId]\r\n                        : state.followingInProgress.filter(id => id !== action.userId)\r\n                }\r\n            )\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const followSuccess = (userId: number): FollowActionType => ({type: FOLLOW, userId})\r\nexport const unfollowSuccess = (userId: number): UnfollowActionType => ({type: UNFOLLOW, userId})\r\nexport const setUsers = (users: Array<UsersType>): SetUsersActionType => ({type: SET_USERS, users})\r\nexport const setCurrentPage = (currentPage: number): SetCurrentPageActionType => ({\r\n    type: SET_CURRENT_PAGE,\r\n    currentPage\r\n})\r\nexport const setTotalUsersCount = (totalUsersCount: number): SetTotalUsersCountActionType => ({\r\n    type: SET_TOTAL_USERS_COUNT,\r\n    count: totalUsersCount\r\n})\r\nexport const toggleIsFetching = (isFetching: boolean): ToggleIsFetchingActionType => ({\r\n    type: TOGGLE_IS_FETCHING, isFetching\r\n})\r\nexport const toggleFollowingProgress = (isFetching: boolean, userId: number): ToggleFollowingProgressActionType => ({\r\n    type: \"TOGGLE_IS_FOLLOWING_PROGRESS\", isFetching, userId\r\n})\r\n\r\ntype ThunkType = ThunkAction<void, RootReduxState, unknown, ActionType>\r\n\r\nexport const getUsers = (page: number, pageSize: number): ThunkType => {\r\n    return async (dispatch) => {\r\n        dispatch(toggleIsFetching(true))\r\n        dispatch(setCurrentPage(page))\r\n\r\n        let response = await usersAPI.getUsers(page, pageSize)\r\n        dispatch(toggleIsFetching(false))\r\n        dispatch(setUsers(response.items))\r\n        dispatch(setTotalUsersCount(response.totalCount))\r\n\r\n    }\r\n}\r\n\r\nconst followUnfollowFlow =\r\n    async (dispatch: Dispatch<ActionType>, id: number, apiMethod: any, actionCreator: (userId: number) => FollowActionType | UnfollowActionType): Promise<void> => {\r\n        dispatch(toggleFollowingProgress(true, id))\r\n        let response = await apiMethod(id)\r\n\r\n        if (response.resultCode === 0) {\r\n            dispatch(actionCreator(id))\r\n        }\r\n        dispatch(toggleFollowingProgress(false, id))\r\n    }\r\n\r\nexport const follow = (id: number): ThunkType => {\r\n    return async (dispatch) => {\r\n        dispatch(toggleFollowingProgress(true, id))\r\n        await followUnfollowFlow(dispatch, id, usersAPI.followed.bind(usersAPI), followSuccess)\r\n\r\n    }\r\n}\r\n\r\nexport const unfollow = (id: number): ThunkType => {\r\n    return async (dispatch) => {\r\n        dispatch(toggleFollowingProgress(true, id))\r\n        await followUnfollowFlow(dispatch, id, usersAPI.unfollowed.bind(usersAPI), unfollowSuccess)\r\n    }\r\n}\r\n\r\n\r\nexport default usersReducer","import {authAPI, ResultCodeEnum, ResultCodeForCaptcha, securityAPI} from \"../api/api\";\r\nimport {ThunkAction} from \"redux-thunk\";\r\nimport {RootReduxState} from \"./redux-store\";\r\nimport {stopSubmit} from \"redux-form\";\r\n\r\nexport type DataType = {\r\n    userId: number | null\r\n    email: string | null\r\n    login: string | null\r\n    isAuth: boolean\r\n}\r\n\r\ntype SetAuthReducerActionType = {\r\n    type: typeof SET_USER_DATA\r\n    payload: DataType\r\n}\r\n\r\ntype GetCaptchaUrlSuccessActionType = {\r\n    type: typeof GET_CAPTCHA_URL_SUCCESS\r\n    payload: {\r\n        captchaUrl: string\r\n    }\r\n}\r\n\r\ntype AutLoginActionType = {\r\n    type: 'LOGIN'\r\n    data: {\r\n        userId: number\r\n    }\r\n}\r\ntype AntiLoginActionType = {\r\n    type: 'OUT_LOGIN'\r\n    data: {}\r\n}\r\n\r\n\r\ntype ActionType = SetAuthReducerActionType | AutLoginActionType | AntiLoginActionType | GetCaptchaUrlSuccessActionType\r\n\r\nconst SET_USER_DATA = 'SET_USER_DATA'\r\nconst GET_CAPTCHA_URL_SUCCESS = 'GET_CAPTCHA_URL_SUCCESS'\r\n\r\ntype AuthType = {\r\n    userId: number | null\r\n    email: string | null\r\n    login: string | null\r\n    isAuth: boolean\r\n    captchaUrl: string | null\r\n}\r\n\r\nlet initialState: AuthType = {\r\n    userId: null,\r\n    email: null,\r\n    login: null,\r\n    isAuth: false,\r\n    captchaUrl: null\r\n}\r\n\r\nconst authReducer = (state = initialState, action: ActionType): AuthType => {\r\n    switch (action.type) {\r\n        case \"SET_USER_DATA\":\r\n        case \"GET_CAPTCHA_URL_SUCCESS\":\r\n            return {\r\n                ...state,\r\n                ...action.payload\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const setAuthUserData = (userId: number | null, email: string | null, login: string | null, isAuth: boolean): SetAuthReducerActionType =>\r\n    ({type: SET_USER_DATA, payload: {userId, email, login, isAuth}})\r\n\r\n\r\nexport const getCaptchaUrlSuccess = (captchaUrl: string): GetCaptchaUrlSuccessActionType =>\r\n    ({type: GET_CAPTCHA_URL_SUCCESS, payload: {captchaUrl}})\r\n\r\ntype ThunkType = ThunkAction<void, RootReduxState, unknown, ActionType>\r\n\r\nexport const getAuthUserData = (): ThunkType => async (dispatch) => {\r\n    let meData= await authAPI.me()\r\n    if (meData.resultCode === ResultCodeEnum.Success) {\r\n        let {id, login, email} = meData.data\r\n        dispatch(setAuthUserData(id, email, login, true))\r\n    }\r\n\r\n}\r\n\r\nexport const getCaptchaUrl = (): ThunkType => async (dispatch) => {\r\n    const data = await securityAPI.getCaptcha()\r\n    const captchaUrl = data.url\r\n\r\n\r\n    dispatch(getCaptchaUrlSuccess(captchaUrl))\r\n\r\n}\r\n\r\n\r\nexport const login = (email: string, password: string, rememberMe: boolean, captcha: string): ThunkType => async (dispatch) => {\r\n    let loginData = await authAPI.login(email, password, rememberMe, captcha)\r\n    if (loginData.resultCode === ResultCodeEnum.Success) {\r\n        dispatch(getAuthUserData())\r\n    } else {\r\n        if (loginData.resultCode === ResultCodeForCaptcha.CaptchaIsRequired) {\r\n            dispatch(getCaptchaUrl())\r\n        }\r\n        let message = loginData.messages.length > 0 ? loginData.messages[0] : 'Some error'\r\n        // @ts-ignore\r\n        dispatch(stopSubmit(\"login\", {_error: message}))\r\n    }\r\n}\r\n\r\n\r\n\r\nexport const logout = (): ThunkType => async (dispatch) => {\r\n    let logoutData = await authAPI.logout()\r\n    if (logoutData.resultCode === ResultCodeEnum.Success) {\r\n        dispatch(setAuthUserData(null, null, null, false))\r\n    }\r\n}\r\n\r\nexport default authReducer","import {ThunkAction} from \"redux-thunk\";\r\nimport {RootReduxState} from \"./redux-store\";\r\nimport {getAuthUserData} from \"./auth-reducer\";\r\n\r\n\r\ntype SetInitializedActionType = {\r\n    type: 'INITIALIZED_SUCCESS'\r\n    initialized: boolean\r\n}\r\nconst INITIALIZED_SUCCESS= 'INITIALIZED_SUCCESS'\r\n\r\ntype InitialStateType = {\r\n    initialized: boolean\r\n}\r\n\r\nlet initialState: InitialStateType = {\r\n    initialized: false\r\n}\r\n\r\nconst appReducer = (state = initialState, action:SetInitializedActionType): InitialStateType => {\r\n    switch (action.type) {\r\n        case INITIALIZED_SUCCESS:\r\n            return {\r\n                ...state,\r\n              initialized: true\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const initializedSuccess = (initialized: boolean): SetInitializedActionType => ({type: \"INITIALIZED_SUCCESS\", initialized})\r\n// export const initializedSuccess = () => ({type: \"INITIALIZED_SUCCESS\"})\r\n\r\ntype ThunkType = ThunkAction<void, RootReduxState, unknown, SetInitializedActionType>\r\n\r\n\r\nexport const initializeApp = (): ThunkType => (dispatch) => {\r\n    let promise = dispatch(getAuthUserData())\r\n    // dispatch(somethingelse())\r\n    // dispatch(somethingelse())\r\n    // @ts-ignore\r\n    promise.then(()=>{\r\n        dispatch(initializedSuccess(true))\r\n    })\r\n\r\n\r\n}\r\n\r\nexport default appReducer","import {applyMiddleware, combineReducers, createStore } from \"redux\";\r\nimport profileReducer from \"./profile-reducer\";\r\nimport dialogsReducer from \"./dialog-reducer\";\r\nimport usersReducer from \"./users-reducer\";\r\nimport authReducer from \"./auth-reducer\";\r\nimport thunkMiddleware from \"redux-thunk\"\r\nimport { reducer as formReducer } from 'redux-form'\r\nimport appReducer from \"./app-reducer\";\r\n\r\nconst rootReduser = combineReducers({\r\n    profilePage: profileReducer,\r\n    dialogsPage: dialogsReducer,\r\n    usersPage: usersReducer,\r\n    auth: authReducer,\r\n    form: formReducer,\r\n    app: appReducer\r\n})\r\n\r\nexport type RootReduxState = ReturnType<typeof rootReduser>\r\n\r\n\r\nlet store = createStore(rootReduser, applyMiddleware(thunkMiddleware))\r\n\r\nexport type ReduxStoreType = typeof store\r\nexport default store\r\n\r\n// @ts-ignore\r\nwindow.store = store","import React from 'react';\r\nimport {NavLink} from 'react-router-dom';\r\nimport s from './Navbar.module.css';\r\n\r\nconst Navbar = () => {\r\n    return <nav className={s.nav}>\r\n        <div className={s.item}>\r\n            <NavLink to='/profile' activeClassName={s.activeLink}>Profile</NavLink>\r\n        </div>\r\n        <div className={s.item}>\r\n            <NavLink to='/dialogs' activeClassName={s.activeLink}>Messages</NavLink>\r\n        </div>\r\n        <div className={s.item}>\r\n            <NavLink to='/news' activeClassName={s.activeLink}>News</NavLink>\r\n        </div>\r\n        <div className={s.item}>\r\n        <NavLink to='/users' activeClassName={s.activeLink}>Users</NavLink>\r\n    </div>\r\n        <div className={s.item}>\r\n            <NavLink to='/music' activeClassName={s.activeLink}>Music</NavLink>\r\n        </div>\r\n        <div className={s.item}>\r\n            <NavLink to='/settings' activeClassName={s.activeLink}>Settings</NavLink>\r\n        </div>\r\n    </nav>\r\n}\r\n\r\nexport default Navbar;","import React from 'react'\r\nimport style from './Music.module.css'\r\n\r\nexport const Music = () => {\r\n    return (\r\n        <div className={style.music}>\r\n            <h2>Новая музыка на - <a href='https://zaycev.net' target={'_blank'}>zaicev.net</a></h2>\r\n        </div>\r\n    )\r\n}\r\n\r\n","import React from 'react'\r\nimport style from './News.module.css'\r\n\r\nexport const News = () => {\r\n    return (\r\n        <div className={style.news}>\r\n            <h2>Свежие новости - <a href={'https://news.ru'} target={'_blank'}>Здесь</a></h2>\r\n            {/*<button>OK</button>*/}\r\n        </div>\r\n    )\r\n}\r\n\r\n","import React from 'react'\r\nimport style from './Settings.module.css'\r\n\r\nexport const Settings = () => {\r\n\r\n    return (\r\n        <div className={style.settings}>\r\n            <h3>Цветовая гамма</h3>\r\n            <button>Light theme</button>\r\n            <button style={{background: 'black', color: 'white'}}>Dark theme</button>\r\n        </div>\r\n    )\r\n}\r\n\r\n","import React, {useState} from 'react'\r\nimport styles from './Paginator.module.css'\r\n\r\ntype PaginatorPropsType = {\r\n    pageSize: number\r\n    totalItemsCount: number\r\n    currentPage: number\r\n    onPageChanged: (pageNumber: number) => void\r\n    portionSize: number\r\n}\r\n\r\nconst Paginator: React.FC<PaginatorPropsType> = ({totalItemsCount,pageSize, currentPage,onPageChanged, portionSize}) => {\r\n\r\n    let pagesCount = Math.ceil(totalItemsCount / pageSize)\r\n    let pages = []\r\n    for (let i = 1; i <= pagesCount; i++) {\r\n        pages.push(i)\r\n    }\r\n    let portionCount = Math.ceil(pagesCount / portionSize)\r\n    let [portionNumber, setPortionNumber] = useState(1)\r\n    let leftPortionPageNUmber = (portionNumber - 1) * portionSize + 1\r\n    let rightPortionPageNUmber = portionNumber * portionSize\r\n\r\n    return <div className={styles.paginator}>\r\n        {portionNumber > 1 && <button className={styles.prevButton} onClick={()=>{setPortionNumber(portionNumber - 1)}}>PREV</button>}\r\n            {pages\r\n                .filter(p => p >= leftPortionPageNUmber && p <= rightPortionPageNUmber)\r\n                .map(p => {\r\n                return <span className={currentPage === p ? styles.pageNumber : styles.selectedPage}\r\n                             onClick={() => {onPageChanged(p)}}>{p}</span>\r\n            })}\r\n        {portionCount > portionNumber && <button className={styles.nextButton} onClick={()=>{setPortionNumber(portionNumber + 1)}}>NEXT</button>}\r\n        </div>\r\n\r\n}\r\n\r\n\r\nexport default Paginator","import {UsersType} from \"../../redux/users-reducer\";\r\nimport React from \"react\";\r\nimport {NavLink} from \"react-router-dom\";\r\nimport userPhoto from \"../../assets/images/users2.png\";\r\nimport s from \"./User.module.css\";\r\n\r\ntype UserPropsType = {\r\n    users: Array<UsersType>\r\n    followingInProgress: Array<number>\r\n    follow: (id: number) => void\r\n    unfollow: (id: number) => void\r\n}\r\nexport const User: React.FC<UserPropsType> = ({users, followingInProgress, follow, unfollow}) => {\r\n    return <div>\r\n        {users.map(u => <div key={u.id}>\r\n            <span>\r\n                <div>\r\n                    <NavLink to={'/profile/' + u.id}><img alt={''}\r\n                                                          src={u.photos.small != null ? u.photos.small : userPhoto}\r\n                                                          className={s.photo}/>\r\n                    </NavLink>\r\n                </div>\r\n                <div>\r\n                    {u.followed ? <button style={{marginLeft: 20}} disabled={followingInProgress.some(id => id === u.id)}\r\n                                          onClick={() => {\r\n                                              unfollow(u.id)\r\n                                          }}>UnFollow</button>\r\n                        : <button style={{marginLeft: 20}} disabled={followingInProgress.some(id => id === u.id)}\r\n                                  onClick={() => {\r\n                                      follow(u.id)\r\n                                  }}>Follow</button>}\r\n                </div>\r\n            </span>\r\n            <span>\r\n                <div style={{color: '#e6dede', paddingLeft: 20}}>{u.name}</div>\r\n                <div  style={{color: '#e6dede'}}>{u.status}</div>\r\n            </span>\r\n\r\n        </div>)}\r\n    </div>\r\n}","export default \"data:image/png;base64,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\"","import React from 'react'\r\nimport {UsersType} from \"../../redux/users-reducer\";\r\nimport Paginator from \"../common/Paginator/Paginator\";\r\nimport {User} from \"./User\";\r\nimport s from './Users.module.css'\r\n\r\ntype UsersPropsType = {\r\n    users: Array<UsersType>\r\n    pageSize: number\r\n    totalUsersCount: number\r\n    currentPage: number\r\n    follow: (id: number) => void\r\n    unfollow: (id: number) => void\r\n    followingInProgress: Array<number>\r\n    followSuccess: (userId: number) => void\r\n    unfollowSuccess: (userId: number) => void\r\n    onPageChanged: (pageNumber: number) => void\r\n}\r\n\r\nconst Users = (props: UsersPropsType) => {\r\n\r\n    let pagesCount = Math.ceil(props.totalUsersCount / props.pageSize)\r\n    let pages = []\r\n    for (let i = 1; i <= pagesCount; i++) {\r\n        pages.push(i)\r\n    }\r\n\r\n    return <div className={s.usersContainer}>\r\n        <Paginator currentPage={props.currentPage}\r\n                   onPageChanged={props.onPageChanged}\r\n                    totalItemsCount={props.totalUsersCount}\r\n                   pageSize={props.pageSize}\r\n                   portionSize = {10}\r\n        />\r\n        <div>\r\n        <User users={props.users} follow={props.follow} followingInProgress={props.followingInProgress} unfollow={props.unfollow}/>\r\n        </div>\r\n    </div>\r\n}\r\n\r\n\r\nexport default Users","import {RootReduxState} from \"./redux-store\";\r\nimport {createSelector} from \"reselect\";\r\n\r\nexport const getUserSelector = (state: RootReduxState) => {\r\n return state.usersPage.users\r\n}\r\n\r\nexport const getUser = createSelector(getUserSelector,(users)=>{\r\n    return users.filter(u=>true)\r\n})\r\n\r\nexport const getPageSize = (state: RootReduxState) => {\r\n    return state.usersPage.pageSize\r\n}\r\n\r\nexport const getTotalUsersCount = (state: RootReduxState) => {\r\n    return state.usersPage.totalUsersCount\r\n}\r\n\r\nexport const getCurrentPage = (state: RootReduxState) => {\r\n    return state.usersPage.currentPage\r\n}\r\n\r\nexport const getIsFetching = (state: RootReduxState) => {\r\n    return state.usersPage.isFetching\r\n}\r\n\r\nexport const getFollowingInProgress = (state: RootReduxState) => {\r\n    return state.usersPage.followingInProgress\r\n}\r\n\r\n\r\n","import React from 'react'\r\nimport {connect} from \"react-redux\";\r\nimport {\r\n    follow,\r\n    followSuccess,\r\n    getUsers,\r\n    setCurrentPage,\r\n    toggleFollowingProgress,\r\n    unfollow,\r\n    unfollowSuccess,\r\n    UsersType\r\n} from \"../../redux/users-reducer\";\r\nimport {RootReduxState} from \"../../redux/redux-store\";\r\nimport Users from \"./Users\";\r\nimport {Preloader} from \"../common/Preloader/Preloader\";\r\nimport {withAuthRedirect} from \"../../hoc/withAuthRedirect\";\r\nimport {compose} from \"redux\";\r\nimport {\r\n    getCurrentPage,\r\n    getFollowingInProgress,\r\n    getIsFetching,\r\n    getPageSize,\r\n    getTotalUsersCount, getUser,\r\n} from \"../../redux/users-selector\";\r\n\r\n\r\ntype MapStateToPropsType = {\r\n    users: Array<UsersType>\r\n    pageSize: number\r\n    totalUsersCount: number\r\n    currentPage: number\r\n    isFetching: boolean\r\n    followingInProgress: number[]\r\n}\r\n\r\ntype MapDispatchToPropsType = {\r\n    followSuccess: (userId: number) => void\r\n    follow: (id: number) => void\r\n    unfollow: (id: number) => void\r\n    unfollowSuccess: (userId: number) => void\r\n    setCurrentPage: (pageNumber: number) => void\r\n    toggleFollowingProgress: (isFetching: boolean, userId: number) => void\r\n    getUsers: (currentPage: number, pageSize: number) => void\r\n}\r\n\r\ntype UsersPropsType = MapStateToPropsType & MapDispatchToPropsType\r\n\r\n\r\nclass UsersContainer extends React.Component<UsersPropsType> {\r\n\r\n    componentDidMount() {\r\n        // const {currentPage, pageSize} = this.props\r\n        // this.props.getUsers(currentPage, pageSize)\r\n        //вот так круче по феншую что выше\r\n        this.props.getUsers(this.props.currentPage, this.props.pageSize)\r\n    }\r\n\r\n    onPageChanged = (pageNumber: number) => {\r\n        this.props.getUsers(pageNumber, this.props.pageSize)\r\n    }\r\n\r\n    render() {\r\n        return <>\r\n            {this.props.isFetching ? <Preloader/> : null}\r\n            <Users\r\n                totalUsersCount={this.props.totalUsersCount}\r\n                pageSize={this.props.pageSize}\r\n                currentPage={this.props.currentPage}\r\n                onPageChanged={this.onPageChanged}\r\n                follow={this.props.follow}\r\n                unfollow={this.props.unfollow}\r\n                users={this.props.users}\r\n                followSuccess={this.props.followSuccess}\r\n                unfollowSuccess={this.props.unfollowSuccess}\r\n                followingInProgress={this.props.followingInProgress}\r\n            />\r\n        </>\r\n    }\r\n\r\n}\r\n\r\n\r\nlet mapStateToProps = (state: RootReduxState): MapStateToPropsType => {\r\n    return {\r\n        users: getUser(state),\r\n        pageSize: getPageSize(state),\r\n        totalUsersCount: getTotalUsersCount(state),\r\n        currentPage: getCurrentPage(state),\r\n        isFetching: getIsFetching(state),\r\n        followingInProgress: getFollowingInProgress(state),\r\n    }\r\n}\r\n\r\n// let mapDispatchToProps = (dispatch: any): mapDispatchToPropsType => {\r\n//     return {\r\n//         follow: (userId: number) => {\r\n//             dispatch(followAC(userId))\r\n//         },\r\n//         unfollow: (userId: number) => {\r\n//             dispatch(unfollowAC(userId))\r\n//         },\r\n//         setUsers: (users: Array<UsersType>) => {\r\n//             dispatch(setUsersAC(users))\r\n//         },\r\n//         setCurrentPage: (pageNumber: number) => {\r\n//             dispatch(setCurrentPageAC(pageNumber))\r\n//         },\r\n//         setTotalUsersCount: (totalCount: number) => {\r\n//             dispatch(setTotalUsersCountAC(totalCount))\r\n//         },\r\n//         toggleIsFetching: (isFetching: boolean) => {\r\n//             dispatch(toggleIsFetchingAC(isFetching))\r\n//         }\r\n//     }\r\n// }\r\n\r\n\r\n// export default withAuthRedirect(connect<MapStateToPropsType, MapDispatchToPropsType, {}, RootReduxState>\r\n// (mapStateToProps, {follow, unfollow, followSuccess, unfollowSuccess,\r\n//     setCurrentPage, toggleFollowingProgress, getUsers\r\n//     })(UsersContainer))\r\n//\r\n\r\nexport default compose<React.ComponentType>(\r\n    connect<MapStateToPropsType, MapDispatchToPropsType, {}, RootReduxState>\r\n    (mapStateToProps, {\r\n        follow, unfollow, followSuccess, unfollowSuccess,\r\n        setCurrentPage, toggleFollowingProgress, getUsers\r\n    }),\r\n    withAuthRedirect)(UsersContainer)","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport s from './Header.module.css';\r\nimport {HeaderPropsType} from \"./HeaderContainer\";\r\n\r\n\r\nconst Header = (props: HeaderPropsType) => {\r\n    return <header className={s.header}>\r\n        <div className={s.loginBlock}>\r\n            {props.isAuth\r\n                ? <div><button style={{display: 'contents', fontSize: 17, color: 'white'}} onClick={props.logout}>Log out  </button>  </div>\r\n            :<NavLink to={'/login'}>Login</NavLink>}\r\n        </div>\r\n    </header>\r\n}\r\n\r\nexport default Header;","import React from 'react';\r\nimport Header from \"./Header\";\r\nimport {connect} from \"react-redux\";\r\nimport {logout} from \"../../redux/auth-reducer\";\r\nimport {RootReduxState} from \"../../redux/redux-store\";\r\n\r\nexport type HeaderPropsType = MapStateToPropsType & MapDispatchToPropsType\r\n\r\nclass HeaderContainer extends React.Component<HeaderPropsType>{\r\n\r\n\r\n    render() {\r\n        return <Header {...this.props}/>\r\n    }\r\n}\r\n\r\ntype MapStateToPropsType = {\r\n    login: string | null\r\n    isAuth: boolean\r\n}\r\n\r\ntype MapDispatchToPropsType = {\r\n    logout: () => void\r\n}\r\nlet mapStateToProps = (state:RootReduxState): MapStateToPropsType => {\r\n    return {\r\n        login: state.auth.login,\r\n        isAuth: state.auth.isAuth\r\n    }\r\n}\r\n\r\n\r\nexport default connect <MapStateToPropsType,MapDispatchToPropsType,{},RootReduxState>\r\n(mapStateToProps,{logout})(HeaderContainer);","import React from 'react'\r\nimport {Field, reduxForm} from \"redux-form\";\r\nimport {Input} from \"../common/FormsControls/FormsControls\";\r\nimport {required} from \"../../utils/validators/validators\";\r\nimport {connect} from \"react-redux\";\r\nimport {login} from \"../../redux/auth-reducer\";\r\nimport {Redirect} from \"react-router-dom\";\r\nimport {RootReduxState} from \"../../redux/redux-store\";\r\nimport s from './Login.module.css'\r\n\r\n\r\n\r\n\r\nconst Login = (props: any) => {\r\n    const onSubmit = (formData: any) => {\r\n        props.login(formData.email, formData.password, formData.rememberMe, formData.captcha)\r\n    }\r\n\r\n    if (props.isAuth) {\r\n        return <Redirect to='/profile'/>\r\n    }\r\n\r\n    return <div className={s.loginContainer}>\r\n        <h1 style={{color: '#e6dede'}}>Login</h1>\r\n        <LoginReduxForm onSubmit={onSubmit}\r\n                        // captchaUrl={props.captchaUrl}\r\n        />\r\n    </div>\r\n}\r\n\r\n\r\n\r\nexport const LoginForm = (props: any) => {\r\n\r\n    return <form onSubmit={props.handleSubmit}>\r\n\r\n        {/*{createField('Email', 'email', [required], Input)}*/}\r\n\r\n        <Field component={Input} validate={[required]} name={'email'} placeholder={'Email'}/>\r\n\r\n        {/*{createField('Password', 'password', [required], Input)}*/}\r\n        <Field component={Input} validate={[required]} name={'password'} placeholder={'Password'} type={'password'}/>\r\n\r\n        <div>\r\n            <Field component={Input} name={'rememberMe'} type={\"checkbox\"}/> remember me\r\n        </div>\r\n        <div>\r\n            {props.captchaUrl && <img alt={''} src={props.captchaUrl}/>}\r\n            <div>\r\n                {props.error}\r\n            </div>\r\n            <button>Login</button>\r\n        </div>\r\n    </form>\r\n}\r\n\r\nconst LoginReduxForm = reduxForm({form: 'Login'})(LoginForm)\r\n\r\ntype MapStateToPropsType = {\r\n    isAuth: boolean\r\n    captchaUrl: string | null\r\n}\r\n\r\ntype MapDispatchToPropsType = {\r\n    login: (email: string, password: string, rememberMe: boolean, captcha: string) => void\r\n}\r\n\r\nconst mapStateToProps = (state: RootReduxState): MapStateToPropsType => ({\r\n    captchaUrl: state.auth.captchaUrl,\r\n    isAuth: state.auth.isAuth\r\n})\r\n\r\nexport default connect<MapStateToPropsType, MapDispatchToPropsType, {}, RootReduxState>(mapStateToProps, {login})(Login)","import { Suspense } from \"react\"\r\nimport {Preloader} from \"../components/common/Preloader/Preloader\";\r\n\r\nexport const withSuspense = (Component: any) => {\r\n    return (props: any) => {\r\n        return   <Suspense fallback={<Preloader />}>\r\n        <Component {...props}/>\r\n        </Suspense>\r\n\r\n    }\r\n}","import React from 'react';\r\nimport './App.css';\r\nimport Navbar from \"./components/Navbar/Navbar\";\r\nimport {BrowserRouter, Redirect, Route} from \"react-router-dom\"\r\nimport {Music} from \"./components/Music/Music\";\r\nimport {News} from \"./components/News/News\";\r\nimport {Settings} from \"./components/Settings/Settings\";\r\nimport UsersContainer from \"./components/Users/UsersContainer\";\r\nimport HeaderContainer from './components/Header/HeaderContainer';\r\nimport Login from \"./components/Login/Login\";\r\nimport {connect} from \"react-redux\";\r\nimport {RootReduxState} from \"./redux/redux-store\";\r\nimport {compose} from \"redux\";\r\nimport {initializeApp} from \"./redux/app-reducer\";\r\nimport {Preloader} from \"./components/common/Preloader/Preloader\";\r\nimport {withSuspense} from \"./hoc/withSuspence\";\r\n\r\n\r\n\r\nconst DialogsContainer = React.lazy(() => import(\"./components/Dialogs/DialogsContainer\"));\r\nconst ProfileContainer = React.lazy(() => import(\"./components/Profile/ProfileContainer\"));\r\n\r\ntype AppPropsType = MapDispatchToPropsType & MapStateToPropsType\r\n\r\nclass App extends React.Component<AppPropsType> {\r\n\r\n    componentDidMount() {\r\n        this.props.initializeApp()\r\n    }\r\n\r\n    render() {\r\n        if (!this.props.initialized) {\r\n            return <Preloader/>\r\n        }\r\n\r\n        return (\r\n            <BrowserRouter>\r\n                <div className='app-wrapper'>\r\n                    <HeaderContainer/>\r\n                    <Navbar/>\r\n                    <div className='app-wrapper-content'>\r\n                        <Route path='/dialogs' render={withSuspense(DialogsContainer) }/>\r\n                        <Route path='/profile/:userId?'\r\n                               render={withSuspense(ProfileContainer)}/>\r\n                        <Route path='/users' render={() => <UsersContainer/>}/>\r\n                        <Route path='/login' render={() => <Login/>}/>\r\n                        <Route path='/music' component={Music}/>\r\n                        <Route path='/news' component={News}/>\r\n                        <Route path='/settings' component={Settings}/>\r\n                        <Redirect to={'/profile'}/>\r\n                    </div>\r\n                </div>\r\n            </BrowserRouter>\r\n        );\r\n    }\r\n}\r\n\r\ntype MapDispatchToPropsType = {\r\n    initializeApp: () => void\r\n}\r\ntype MapStateToPropsType = {\r\n    initialized: boolean\r\n}\r\n\r\nconst mapStateToProps = (state: RootReduxState) => ({\r\n    initialized: state.app.initialized\r\n})\r\nexport default compose(\r\n    connect<MapStateToPropsType, MapDispatchToPropsType, {}, RootReduxState>\r\n    (mapStateToProps, {initializeApp})(App))\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport store from \"./redux/redux-store\";\r\nimport './index.css';\r\nimport App from './App';\r\nimport {BrowserRouter} from \"react-router-dom\";\r\nimport {Provider} from \"react-redux\";\r\n\r\n\r\nReactDOM.render(\r\n        <BrowserRouter>\r\n            <Provider store={store}>\r\n            <App />\r\n            </Provider>\r\n        </BrowserRouter>, document.getElementById('root')\r\n    )\r\n\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","export default __webpack_public_path__ + \"static/media/preloader.0bbdeb44.gif\";","import preloader from \"../../../assets/images/preloader.gif\";\r\nimport React from \"react\";\r\n\r\nexport const Preloader = () => {\r\n    return (\r\n        <img alt={''} style={{width: '150px', height: '70px'}} src={preloader}/>\r\n    )\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"paginator\":\"Paginator_paginator__2uGjc\",\"pageNumber\":\"Paginator_pageNumber__2zPW0\",\"selectedPage\":\"Paginator_selectedPage__3cR_P\",\"nextButton\":\"Paginator_nextButton__tQvHv\",\"prevButton\":\"Paginator_prevButton__2WW0g\"};","import React from 'react'\r\nimport styles from './FormsControls.module.css'\r\nimport {Field} from \"redux-form\";\r\n\r\n// @ts-ignore\r\nexport const FormControl = ({input, meta, child, ...props}) => {\r\n\r\n    const hasError = meta.touched && meta.error\r\n\r\n    return <div className={styles.formControl + ' ' + (hasError? styles.error : '')}>\r\n        <div>\r\n            {props.children}\r\n        </div>\r\n        <div>\r\n            {hasError && <span>{meta.error} </span>}\r\n        </div>\r\n    </div>\r\n}\r\n\r\n\r\nexport const Textarea = (props: any) => {\r\n    const {input, meta, child, ...restProps} = props\r\n    return <FormControl {...props}> <textarea {...input} {...restProps} /></FormControl>\r\n}\r\n\r\n\r\nexport const Input = (props: any) => {\r\n    const {input, meta, child, ...restProps} = props\r\n\r\n    return <FormControl {...props}><input {...input} {...restProps} /> </FormControl>\r\n}\r\nexport const createField = (placeholder: string, name: string, validators: any, component: any, props = {}, text = '') => {\r\n    <div>\r\n        <Field placeholder={placeholder}\r\n        name={name} validate={validators}\r\n               component={component}\r\n            {...props}\r\n        />{text}\r\n    </div>\r\n}","export const required = (value: any) => {\r\n    if(value){\r\n        return undefined\r\n    }\r\n    return 'Field is required'\r\n}\r\n\r\n\r\nexport const maxLengthCreator = (maxLength: number) => (value: any) => {\r\n    if(value.length > maxLength) {\r\n        return `Max length is ${maxLength} symbols`\r\n    }\r\n    return undefined\r\n}\r\n//\r\n// export const minLengthCreator = (minLength: number) => (value: any) => {\r\n//     if(value.length > value.minLength) return `Max length is ${minLength} symbols`\r\n//     return undefined\r\n//\r\n// }\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__3L6tK\",\"loginBlock\":\"Header_loginBlock__1a9XU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formControl\":\"FormsControls_formControl__1_bCD\",\"error\":\"FormsControls_error__2XZs6\"};","import {profileAPI, usersAPI} from \"../api/api\";\r\nimport {ThunkAction} from \"redux-thunk\";\r\nimport {RootReduxState} from \"./redux-store\";\r\n\r\nexport type ActionTypes =\r\n    AddPostActionType\r\n    | UpdateNewPostTextActionType\r\n    | SendMessageActionType\r\n    | SetUserProfileActionType\r\n    | SetStatusActionType\r\n    | DeletePostActionType\r\n    | savePhotoSuccessActionType\r\n\r\ntype AddPostActionType = {\r\n    type: 'ADD-POST'\r\n    newPostBody: string\r\n}\r\n\r\ntype DeletePostActionType = {\r\n    type: 'DELETE_POST'\r\n    id: number\r\n}\r\n\r\ntype UpdateNewPostTextActionType = {\r\n    type: 'UPDATE-NEW-POST-TEXT'\r\n    newText: string\r\n\r\n}\r\n\r\ntype SendMessageActionType = {\r\n    type: 'SEND_MESSAGE'\r\n}\r\n\r\ntype SetUserProfileActionType = {\r\n    type: \"SET_USER_PROFILE\"\r\n    profile: ProfileType | null\r\n}\r\ntype SetStatusActionType = {\r\n    type: \"SET_STATUS\"\r\n    status: string\r\n}\r\n\r\ntype PhotosType = {\r\n    small: string\r\n    large: string\r\n}\r\ntype savePhotoSuccessActionType = {\r\n    type:  typeof SAVE_PHOTO_SUCCESS\r\n    photos: PhotosType\r\n}\r\n\r\ntype PostType = {\r\n    id: number\r\n    message: string\r\n    likesCount: number\r\n}\r\n\r\nexport type ProfilePageType = {\r\n    posts: Array<PostType>\r\n    profile: ProfileType | null\r\n    status: string\r\n}\r\n\r\nconst ADD_POST = 'ADD-POST'\r\nconst SET_USER_PROFILE = 'SET_USER_PROFILE'\r\nconst SET_STATUS = 'SET_STATUS'\r\nconst DELETE_POST = 'DELETE_POST'\r\nconst SAVE_PHOTO_SUCCESS = 'SAVE_PHOTO_SUCCESS'\r\n\r\nexport type ContactType = {\r\n    github: string\r\n    vk: string\r\n    facebook: string\r\n    instagram: string\r\n    twitter: string\r\n    website: string\r\n    youtube: string\r\n    mainLink: string\r\n}\r\n\r\nexport type ProfileType = {\r\n    userId: number\r\n    lookingForAJob: boolean\r\n    lookingForAJobDescription: string\r\n    fullName: string\r\n    contacts: ContactType\r\n    photos: PhotosType\r\n}\r\n\r\n\r\nlet initialState: ProfilePageType = {\r\n    posts: [\r\n        {id: 1, message: 'Hi, how are you?', likesCount: 10},\r\n        {id: 2, message: 'It\\'s my first post', likesCount: 25},\r\n        {id: 3, message: 'Hello', likesCount: 25},\r\n    ],\r\n    profile: null,\r\n    status: ''\r\n}\r\n\r\nconst profileReducer = (state = initialState, action: ActionTypes): ProfilePageType => {\r\n    // @ts-ignore\r\n    switch (action.type) {\r\n        case ADD_POST : {\r\n            let newPost: PostType = {\r\n                id: 5, message: action.newPostBody, likesCount: 0\r\n            }\r\n            return {\r\n                ...state,\r\n                posts: [...state.posts, newPost]\r\n            }\r\n        }\r\n        case DELETE_POST:\r\n            return {...state, posts: [...state.posts.filter(p => p.id !== action.id)]}\r\n        case SET_USER_PROFILE:\r\n            return {\r\n                ...state, profile: action.profile\r\n            }\r\n        case SET_STATUS:\r\n            return {\r\n                ...state, status: action.status\r\n            }\r\n        case SAVE_PHOTO_SUCCESS:\r\n            return {\r\n                ...state, profile: {...state.profile, photos: action.photos} as ProfileType\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const addPostActionCreator = (newPostBody: string): AddPostActionType => ({type: ADD_POST, newPostBody})\r\nexport const deletePost = (id: number): DeletePostActionType => ({type: DELETE_POST, id})\r\nexport const savePhotoSuccess = (photos: PhotosType): savePhotoSuccessActionType => ({type: SAVE_PHOTO_SUCCESS, photos})\r\n\r\n\r\nexport const setUserProfile = (profile: ProfileType | null): SetUserProfileActionType => (\r\n    {type: SET_USER_PROFILE, profile})\r\n\r\nexport const setStatus = (status: string): SetStatusActionType => (\r\n    {type: SET_STATUS, status})\r\n\r\n\r\ntype ThunkType = ThunkAction<void, RootReduxState, unknown, ActionTypes>\r\n\r\nexport const getUserProfile = (userId: number): ThunkType => async (dispatch) => {\r\n    let profileData = await usersAPI.getProfile(userId)\r\n    dispatch(setUserProfile(profileData))\r\n}\r\n\r\nexport const getStatus = (userId: number): ThunkType => async (dispatch) => {\r\n    let response = await profileAPI.getStatus(userId)\r\n    dispatch(setStatus(response.data))\r\n}\r\n\r\nexport const updateStatus = (status: string): ThunkType => async (dispatch) => {\r\n    let response = await profileAPI.updateStatus(status)\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(setStatus(status))\r\n    }\r\n}\r\n\r\nexport const savePhoto = (file: any): ThunkType => async (dispatch) => {\r\n    let response = await profileAPI.savePhoto(file)\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(savePhotoSuccess(response.data.data))\r\n    }\r\n}\r\n\r\n\r\nexport default profileReducer","import React from 'react'\r\nimport {Redirect} from \"react-router-dom\";\r\nimport {connect} from \"react-redux\";\r\nimport {RootReduxState} from \"../redux/redux-store\";\r\n\r\n\r\ntype MapStateToPropsForRedirectType = {\r\n    isAuth: boolean\r\n}\r\n\r\nlet mapStateToPropsForRedirect = (state: RootReduxState):MapStateToPropsForRedirectType => {\r\n    return {\r\n        isAuth: state.auth.isAuth\r\n    }\r\n}\r\n\r\nexport const withAuthRedirect = (Component: any) => {\r\n\r\n    class RedirectComponent extends React.Component<MapStateToPropsForRedirectType, any>{\r\n        render() {\r\n            if(!this.props.isAuth) return  <Redirect to='/login'/>\r\n            return <Component {...this.props}/>\r\n        }\r\n    }\r\n\r\n    return connect<MapStateToPropsForRedirectType,{},{},RootReduxState>(mapStateToPropsForRedirect)(RedirectComponent)\r\n}\r\n\r\n"],"sourceRoot":""}